@model WebApplication1.Models.TICKET_VM

@{
    ViewBag.Title = "Báo giá Cloud - Chi tiết";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>


<style>
    .columns {
        float: left;
        padding: 8px;
    }
    .price {
        list-style-type: none;
        border: 1px solid #eee;
        margin: 0;
        padding: 0;
        -webkit-transition: 0.3s;
        transition: 0.3s;
        font-size: 20px;
    }

   

    .price .header {
        background-color: #111;
        color: white;
        font-size: 16px;
        font-weight:700;
        padding: 4px;
    }

        .price li {
            border-bottom: 1px solid #eee;
            padding: 20px;
            text-align: center;
            padding: 2px 12px;
            font-size: 15px;
        }

    .price .grey {
        background-color: #eee;
        font-size: 20px;
    }

  
</style>
@{ string formattedDateStart = @ViewBag.tic.STARTDATE.ToString("dd/MM/yyyy");
    string formattedDateEnd = @ViewBag.tic.ENDDATE.ToString("dd/MM/yyyy"); }
<div class="container mt-5 p-0 bg-white pb-4 rounded shadow">
    <form method="post" class="mx-4 pt-4">
        <div class="row">
            <div class="col-8">
                <div class="form-row">
                    <div class="form-group mb-4 col-4">
                        <small class="form-text text-muted mb-1">
                            Mã Ticket:
                        </small>
                        <input id="" name="TICKETBA" value="@ViewBag.tic.TICKETBA" type="text" class="form-control">
                        <input id="" name="ID" value="@ViewBag.tic.ID" type="text" class="form-control d-none">
                    </div>
                    <div class="form-group mb-2 col-4">
                        <small class="form-text text-muted mb-1">
                            Chủ sở hữu:
                        </small>
                        <input id="" name="OWNER" value="@ViewBag.tic.OWNER" type="text" class="form-control">
                    </div>
                    <div class="form-group mb-2 col-4">
                        <small class="form-text text-muted mb-1">
                            Vị trí:
                        </small>
                        <input id="" name="LOCATION" value="@ViewBag.tic.LOCATION" type="text" class="form-control">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group mb-4 col-4">
                        <small class="form-text text-muted mb-1">
                            Từ ngày:
                        </small>
                        <input id="" value="@formattedDateStart" type="text" class="form-control" disabled>
                    </div>
                    <div class="form-group mb-2 col-4">
                        <small class="form-text text-muted mb-1">
                            Đến ngày:
                        </small>
                        <input id="" value="@formattedDateEnd" type="text" class="form-control" disabled>
                    </div>  
                    <div class="form-group mb-4 col-4">
                        <small class="form-text text-muted mb-1">
                            Tổng chi phí:
                        </small>
                        <input value="@ViewBag.tic.TOTAL_PRICE đ" type="text" class="form-control" disabled="disabled">
                    </div>
                </div>                
            </div>

            <div class="col-4 d-flex justify-content-center">
                <div class="columns">
                    <ul class="price">
                        <li  class="header" style="background-color: #8d448b !important;">BẢNG GIÁ</li>
                        <li class="text-muted">
                            <span style="font-size:15px;">1 vCPU:</span>
                            <span class="badge badge-primary">
                                @ViewBag.Tic_Price.CPU đ
                            </span>
                        </li>
                        <li class="text-muted">
                            1 GB RAM:
                            <span class="badge badge-success">
                                @ViewBag.Tic_Price.RAM đ
                            </span>
                        </li>
                        <li class="text-muted">
                            1 GB FAST Storage:
                            <span class="badge badge-secondary">
                                @ViewBag.Tic_Price.DISK_FAST đ
                            </span>
                        </li>
                        <li class="text-muted">
                            1 GB SLOW Storage:
                            <span class="badge badge-info">
                                @ViewBag.Tic_Price.DISK_SLOW đ
                            </span>
                        </li>                       
                    </ul>
                </div>
            </div>
        </div>       

        <table class="table table-bordered bg-white mb-2">
            <thead>
                <tr class="table-pink text-table-index text-center">                   
                    <th>
                        Tên
                    </th>
                    <th>
                        vCPU
                    </th>
                    <th>
                        RAM
                    </th>
                    <th>
                        FAST Storage
                    </th>
                    <th>
                        SLOW Storage
                    </th>
                    <th>
                        Hệ điều hành
                    </th>
                    <th>
                        Chi phí
                    </th>
                    
                </tr>
            </thead>
            <tbody id="divCont">
                @{ int x = 0;}
                @foreach (var item in ViewBag.list)
                {
                    <tr id="@x">

                        <td>
                            <div class="form-group m-0">

                                <input value="@item.VM_ID" type="text" class="form-control in_id " id="@x" disabled>
                            </div>
                        </td>
                        <td>
                            <div class="form-group m-0">

                                <input value="@item.CPU" type="text" class="form-control in_cpu " id="@x" disabled>
                            </div>
                        </td>
                        <td>
                            <div class="form-group m-0">
                                <input value="@item.RAM" type="text" class="form-control in_ram" id="@x" disabled>
                            </div>
                        </td>
                        <td>
                            <div class="form-group m-0">
                                <input value="@item.DISK_FAST" type="number" class="form-control in_fast" id="@x" disabled>
                            </div>
                        </td>
                        <td>
                            <div class="form-group m-0">
                                <input value="@item.DISK_SLOW" type="text" class="form-control in_slow" id="@x" disabled>
                            </div>
                        </td>
                        @{ foreach (var os in ViewBag.os_vm)
                            {
                                if (os.ID == item.ID_OS)
                                {
                                    <td>
                                        <div class="form-group m-0">
                                            <input value="@os.NAME_OS" type="text" class="form-control in_os" id="@x" disabled>
                                        </div>
                                    </td>
                                }
                            }
                        }                        
                        <td>
                            <div class="form-group m-0">
                                <input value="@item.PRICE" type="text" class="form-control in_price" disabled="disabled" id="@x">
                            </div>
                        </td>

                    </tr>
                    { x = x + 1; }
                }
            </tbody>
        </table>       
        <div class="text-right">
            <button type="submit" class="btn btn-success font-weight-bold px-5">Lưu</button>
        </div>
        
    </form>
</div>


<script>
    function deleteRow(id) {
        var element = document.getElementById(id);
        element.parentNode.removeChild(element);
    }
</script>
<script>
    inputRe();
    function inputRe() {
        const nodeList = document.querySelectorAll(".in_assid");
        const nodeLista = document.querySelectorAll(".tick-id");
        for (var i = 0; i < nodeList.length; i++) {
            console.log(nodeLista[0].readOnly == true);
            nodeList[i].readOnly = true;
        }
    }

    GetData();
    function GetData()
    {
        @*var jsonObj = @Html.Raw(Json.Encode(ViewBag.AssID));
        const Mats = document.querySelectorAll(".in_assid");
        const Tents = document.querySelectorAll(".in_assna");

        for (let i = 0; i < Mats.length; i++) {
            for (let j = 0; j < jsonObj.length; j++) {
                var AssetID = jsonObj[j].assetCode.trim();
                var AssetName = jsonObj[j].assetName;
                if (Mats[i].value == AssetID && Mats[i].value!=0) {
                    Tents[i].value = AssetName;
                }
            }
        }*@
    }
</script>